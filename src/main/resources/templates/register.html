<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="resister.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <title>회원가입</title>
  </head>
  <body>
    <form action="#" method="post" class="login__register" id="resister">
      <div class="전체틀" id="123">
        <div class="signup" id="123">
          <div class="회원가입상자" id="33279:439">
            <div class="id-box" id="33279:400">
              <p class="id-AJj" id="33279:401">ID</p>
              <input
                type="text"
                name="user-id"
                class="inputframe"
                id="id"
                placeholder="사용할 아이디를 입력하세요"
              />
            </div>
            <button onclick="checkDuplicate()">중복 체크</button>
            <div id="duplicateResult"></div>
            <!-- 결과를 표시할 요소 추가 -->

            <div class="pw-box" id="33279:400">
              <p class="pw" id="33279:401">PW</p>
              <input
                type="password"
                name="pw"
                class="inputframe"
                id="pw"
                placeholder="사용할 패스워드를 입력하세요"
              />
            </div>

            <div class="pwcheck-box" id="33279:400">
              <p class="pw check" id="33279:401">PW CHECK</p>
              <input
                type="password"
                name="pw_check"
                class="inputframe"
                id="pw_check"
                placeholder="사용할 패스워드를 한번 더 입력하세요"
              />
            </div>

            <div class="name-box" id="33279:400">
              <p class="name" id="33279:401">이름</p>
              <input
                type="text"
                name="name"
                class="inputframe"
                id="name"
                placeholder="이름을 입력하세요"
              />
            </div>

            <div class="Nickname-box" id="33279:400">
              <p class="nickname" id="33279:401">닉네임</p>
              <input
                type="text"
                name="nickname"
                class="inputframe"
                id="nickname"
                placeholder="사용할 닉네임을 입력하세요"
              />
            </div>

            <div class="Phone-box" id="33279:400">
              <p class="phone" id="33279:401">휴대폰 번호</p>
              <input
                type="tel"
                name="phone"
                class="inputframe"
                id="phone"
                placeholder="010-****-****"
              />
            </div>

            <div class="Department-box" id="33279:400">
              <p class="department" id="33279:401">소속</p>
              <input
                type="text"
                name="department"
                class="inputframe"
                id="department"
                placeholder="소속을 입력하세요"
              />
            </div>
          </div>
        </div>
        <button class="join-btn" onclick="joinbtn()">Join</button>
        <button type="button" class="join-btn" onclick="cancelbtn()">Cancel</button>
      </div>

      <script>
        function joinbtn() {
          window.location.href = '질문목록페이지.html';
        }
        function cancelbtn() {
          window.location.href = '/src/main.resourse/templates/login.html';
        }

        function checkDuplicate() {
          var usernameInput = document.getElementById('id'); // 수정된 부분
          var duplicateResult = document.getElementById('duplicateResult'); // 수정된 부분

          // AJAX 요청
          $.ajax({
            type: 'GET',
            url: '/validation-id', // 서버로 경로 지정
            data: { id: usernameInput.value },
            success: function (result) {
              if (result) {
                alert('사용 가능한 아이디입니다.');
              } else {
                alert('이미 사용 중인 아이디입니다.');
              }
            },
            error: function () {
              alert('서버 오류가 발생했습니다.');
            },
          });
        }
      </script>
    </form>
  </body>
</html>
